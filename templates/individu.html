{% extends "base.html" %}
{% load i18n %}
{% load extras %}
{% load url from future %}

{% block title %}
  {{ individu }}
{% endblock %}

{% block body %}

  {% with individu.etat as etat %}
    {% include 'etat.html' %}
  {% endwith %}

  <h2>
    {{ individu.nom_complet }}
  </h2>
  <h3>
    {% if not individu.naissance and not individu.deces %}
      <span title="ancrage spatio-temporel">
        {{ individu.ancrage|default:'Époque inconnue' }}
      </span>
    {% else %}
      <span title="{% trans "naissance" %}">
        {{ individu.naissance|default:'?' }}
      </span>
      &ndash;
      <span title="{% trans "décès" %}">
        {{ individu.deces|default:'?' }}
      </span>
    {% endif %}
  </h3>
  <h4 title="
        {% blocktrans count counter=individu.professions.all|length %}profession{% plural %}professions{% endblocktrans %}">
    {{ individu.calc_professions|capfirst|default:'Profession inconnue' }}
  </h4>
  <br />
  <dl>
    {% if individu.nom_naissance %}
      <dt>{% trans "nom de naissance"|capfirst %}</dt>
      <dd>{{ individu.nom_naissance }}</dd>
    {% endif %}
    {% if individu.biographie %}
      <dt>{% trans "biographie"|capfirst %}</dt>
      <dd>{{ individu.biographie }}</dd>
    {% endif %}

    {% with individu.oeuvres.all as oeuvres %}
      {% for oeuvre in oeuvres %}
        {% if forloop.first %}
          <dt>
            {% blocktrans count counter=oeuvres|length %}
              Œuvre
            {% plural %}
              Œuvres
            {% endblocktrans %}
          </dt>
        {% endif %}
        <dd>{{ oeuvre.link }}</dd>
      {% endfor %}
    {% endwith %}
    {% with individu.apparitions.all as apparitions %}
      {% for evenement in apparitions %}
        {% if forloop.first %}
          <dt>
            {% blocktrans count counter=apparitions|length %}
              Apparition
            {% plural %}
              Apparitions
            {% endblocktrans %}
          </dt>
        {% endif %}
        <dd>{{ evenement.link }}</dd>
      {% endfor %}
    {% endwith %}
    {% with individu.publications.all as publications %}
      {% for publication in publications %}
        {% if forloop.first %}
          <dt>
            {% blocktrans count counter=apparitions|length %}
              Publication
            {% plural %}
              Publications
            {% endblocktrans %}
          </dt>
        {% endif %}
        <dd>{{ publication.html }}</dd>
      {% endfor %}
    {% endwith %}
    {% with individu.parents.all as parents %}
      {% for parent in parents %}
        {% if forloop.first %}
          <dt>
            {% blocktrans count counter=parents|length %}
              Parent
            {% plural %}
              Parents
            {% endblocktrans %}
          </dt>
        {% endif %}
        <dd>{{ parent.link }}</dd>
      {% endfor %}
    {% endwith %}
    {% with individu.enfants.all as enfants %}
      {% for enfant in enfants %}
        {% if forloop.first %}
          <dt>
            {% blocktrans count counter=enfants|length %}
              Enfant
            {% plural %}
              Enfants
            {% endblocktrans %}
          </dt>
        {% endif %}
        <dd>{{ enfant.link }}</dd>
      {% endfor %}
    {% endwith %}
    {% include "notes.def" with notes=individu.notes %}
  </dl>
  <br />
  <a href="{% url 'admin:catalogue_individu_change' individu.pk %}">
    {% trans "[Modifier]" %}
  </a>
{% endblock %}

